Enabling Automated Integration Testing of Smart Farming Applications via Digital Twin Prototypes Alexander Barbie∗, Wilhelm Hasselbring∗, Malte Hansen∗ ∗Software Engineering Group, Christian-Albrechts-University, Kiel (Germany) Abstract—Industry 4.0 represents a major technological shift that has the potential to transform the manufacturing industry, making it more efficient, productive, and sustainable. Smart farming is a concept that involves the use of advanced technologies to improve the efficiency and sustainability of agricultural practices. Industry 4.0 and smart farming are closely related, as many of the technologies used in smart farming are also used in Industry 4.0. Digital twins have the potential for cost-effective software development of such applications. With our Digital Twin Prototype approach, all sensor interfaces are integrated into the development process, and their inputs and outputs of the emulated hardware match those of the real hardware. The emulators respond to the same commands and return identically formatted data packages as their real counterparts, making the Digital Twin Prototype a valid source of a digital shadow, i. e. the Digital Twin Prototype is a prototype of the physical twin and can replace it for automated testing of the digital twin software. In this paper, we present a case study for employing our Digital Twin Prototype approach to automated testing of software for improving the making of silage with a smart farming application. Besides automated testing with continuous integration, we also discuss continuous deployment of modular Docker containers in this context. Index Terms—Smart Farming, Agricultural Machinery, Digital Twin Prototypes, Automated Testing, Continuous Integration I. INTRODUCTION Smart farming involves the use of sensors, Io T devices, and big data analytics. Overall, the use of advanced technologies in both Industry 4.0 and smart farming has the potential to transform the way we produce food, making agriculture more efficient, sustainable, and resilient in the face of climate change and other challenges. For Industry 4.0 applications, the embedded software is becoming an increasingly crucial asset. With increasing requirements and, hence, increasing complexity, manufacturers require more engineers to manage the added complexity. The German National Academy of Science and Engineering (acatech) [1] stated already in 2011 that “there is a shortage of qualified engineers”. The demand for these engineers has dramatically increased globally at the beginning of this decade. While large software companies often develop software by distributed teams of engineers [2], this is usually not the case for small and medium enterprises (SMEs) that develop embedded software systems. In SMEs, embedded software is still often developed by the same engineers who also develop the electrical and/or mechanical parts. However, complex CPS require collaboration between mechanical, electrical, and software engineers [1]. With the increasing demand for context-aware, autonomous, and adaptive robotic systems [3], more advanced software engineering methods need to be adopted by the embedded software community. As a result, the way we develop these systems must advance. In future development workflows, the embedded software systems will be the centerpiece of Industry 4.0 applications. To accomplish this, we need to shift from expert-centric tools [3] to modular systems that enable domain experts to contribute to different parts of the system. Over the past decades, cost-saving techniques such as Model-in-the-Loop (MIL), Software-in-the-Loop (SIL), and Hardware-in-the-Loop (HIL) were introduced in the software development process of embedded software systems. They allow engineers to replace manual steps by utilizing software test beds for simulation and emulation. Although simulation and emulation help to reduce the costs for software development, HIL approaches are essential to validate and verify the embedded software system when sensors and actuators are involved [4]. To reduce the time embedded systems need to be validated manually by an engineer, we introduce the Digital Twin Prototype (DTP) approach [5] that enables automated integration testing of embedded software system without the need of a physical connection to its hardware. This paper is structured as follows: In Section II, we present the Digital Twin Prototype approach that allows the development and automated testing of digital twins replacing the common HIL approach with SIL. Section III discusses previous and related work with regards to digital twins. Silage Control, the case under study, and the research design are described in Section IV and Section V. The results are presented and discussed in Section VI. Section VII draws our conlusions and takes a look at future work. II. DIGITAL TWIN PROTOTYPES Grieves and Vickers [6] first used the term “Digital Twin” (DT) in a presentation for the establishment of a Product Lifecycle Management (PLM) center at the University of Michigan. Originating from the manufacturing industry in 2002, digital twins became a buzzword in many marketing departments. In 2010, NASA introduced their vision of a digital twin with a focus on modeling and simulation [7]. a r X i v : 2 3 1 1 . 0 5 7 4 8 v 1 [ c s . S E ] 9 N o v 2 0 2 3

Meanwhile, digital twin research is a rapidly growing field, with applications in a wide range of industries. One of the central works around the understanding of digital twins is by Kritzinger, Karner, Traar, et al. [8], who emphasized in their categorization of digital twins that the physical object plays a crucial role in digital twin development. The physical object provides the source for the digital shadow that synchronizes with the digital twin. This is evident in HIL workflows, where engineers still need to test new code on the physical object, resulting in limited access and inconvenience for teams with multiple engineers. Asynchronous collaboration tools do not resolve the challenge of collaboration on embedded software systems, since engineers still need access to the hardware. Today’s modeling and simulation tools can immediately create a digital twin of a single component or process, with publish/subscribe architectures allowing for all messages between processes to be captured and sent to a database or an Io T platform. However, complex Industry 4.0 applications require integrating multiple sensors and actuators into a larger system, posing a challenge with no simple solutions yet. The embedded community still uses various industrial interfaces and communication protocols such as Profi Bus, Profi Net, Mod Bus, Open CAN, OPC-UA, or MQTT, to name a few. Some of which are proprietary, making integration difficult. Robust software testing for communication protocols is challenging due to the difficulty of emulating or simulating them. Software engineers often use mock-up functions in unit tests to avoid the exchange of data between processes, allowing them to obtain expected values. However, even robust unit testing with comprehensive edge case coverage is not enough. Therefore, some approaches use simulation tools that replace the communication protocols between hardware components with software interfaces. For Industry 4.0 applications, both approaches are inadequate, as insufficient testing can jeopardize the safety of human operators. Despite this, simulation tools are crucial for the development of Industry 4.0 applications as a source of data for sensors and actuators. We advocate an approach that involves emulating the hardware interface between a device driver and a sensor/actuator through virtualization and connecting the emulator to a simulation tool to obtain data from the simulated sensor/actuator. The device drivers can connect to either the real or emulated sensor/actuator without changing its configuration. Emulators can use either existing observed data or data from simulations, establishing a ground truth for the device driver without a physical connection to the real sensor/actuator. This virtualization also allows for the controls of the sensor/actuator to be used in automated tests or during the development process. We call this the Digital Twin Prototype approach. The Digital Twin Prototype takes the role of the physical twin in the communication with the digital twin, allowing to test the digital twin software without access to a physical twin. Definition 1 (Digital Twin Prototype). A Digital Twin Prototype (DTP) is the software prototype of a physical twin. The configurations are equal, yet the connected sensors/actuators are emulated. To simulate the behavior of the physical twin, the emulators use existing recordings of sensors and actuators. For continuous integration testing, the Digital Twin Prototype can be connected to its corresponding digital twin, without the availability of the physical twin. Notice, that Grieves and Vickers [6] referred to a CAD model already as a Digital Twin Prototype. However, according to the categories by Kritzinger, Karner, Traar, et al. [8], this is only a digital model. The relationships between a physical twin, digital twin, and Digital Twin Prototype in our approach are depicted in Fig. 1. The Digital Twin Prototype has the same software configuration as its corresponding physical twin, but uses emulated sensors/actuators instead of real ones. The digital twin can share parts of the software logic with the physical twin, yet without connected sensors and actuators, and includes additional logic for controlling the physical twin and Digital Twin Prototype. With this approach, all interfaces are integrated into the development process, and the inputs and outputs of the emulated hardware match those of the real hardware. The emulators respond to the same commands and return identically formatted data packages as their real counterparts, making the Digital Twin Prototype a valid source of a digital shadow, i. e. the Digital Twin Prototype is a prototype of the physical twin and can replace it during development. With Digital Twin Prototypes, engineers can develop new software modules in their local IDE without a permanent connection to a physical test bed. However, before deployment to production, the entire system must still be tested on the physical twin, as performance tests can only be conducted on hardware identical to that used in production. Nonetheless, Digital Twin Prototypes allow for testing of the Digital Twin Digital Twin Prototype Actuator B Emulator Storage C Emulator Sensor A Emulator Physical Twin Actuator B Storage C Sensor A {x o r} Fig. 1: Relationships of Digital Twin Prototypes with physical twins and digital twins

software logic independently of access to the hardware. III. RELATED AND PREVIOUS WORK Using robotic system for smart farming applications is not a new idea. Shamshiri, Weltzien, Hameed, et al. [9] give an overview of use cases, the state-of-the-art of agricultural robotics and the challenges faced. The overall challenges do not differ from that of other domains: digitalization, automation, and optimization. All robotic applications also face the general challenges inherited from the embedded software systems. The research of digital twins in an agricultural context is still in the early stages. One reason could be, that the interpretation of digital twins in the agricultural context may differ from the common interpretation and includes living things such as digital twins of animals and crops [10], which is a completely different research field from robotics. Conversely, in our case study, the focus is solely on digital twins of agricultural machines. Pylianidis, Osinga, and Athanasiadis [10] conducted a study to investigate the addedvalue of digital twins for agriculture. They found that agricultural digital twins are still in a preliminary stage and are not designed thoroughly enough to compete with digital twins in other disciplines. In their roadmap, they illustrate the evolution of agricultural digital twins. In the first stage, a digital twin includes monitoring, user interface, and analytic components. Next, actuators enrich the ability of digital twins. In a third stage, simulations are included to support decision-making based on past and future predicted states of the physical twin. This continuous including artificial intelligence and eventually, creating a digital twin of the Earth. In addition to the digital twin definition by Kritzinger, Karner, Traar, et al. [8], we built on the digital twin definition by Saracco [11] and presented an overview of the approach in Barbie, Hasselbring, Pech, et al. [5]. The Digital Twin Prototype approach was developed and field tested in the project ARCHES (Autonomous Robotic Networks to Help Modern Societies). ARCHES was a Helmholtz Future Project with a consortium of partners from AWI (Alfred-Wegener Institute Helmholtz Centre for Polar and Marine Research), DLR (German Aerospace Center), KIT (Karlsruhe Institute of Technology), and the GEOMAR (Helmholtz Centre for Ocean Research Kiel). Several Digital Twin Prototypes for ocean observation systems were developed. The major aim of this project was to implement robotic sensor networks, which are able to autonomously respond to changes in the environment by adopting its measurement strategy, in both space and in the deep sea. This approach was evaluated during a research cruise, where a collaborative underwater network of ocean observation systems was established and deployed in the Baltic Sea. A field report on employing Digital Twin Prototypes in this context is published by Barbie, Pech, Hasselbring, et al. [12]. During that cruise, various scenarios were conducted to demonstrate the feasibility of digital twins for maritime environments. The realization of Digital Twin Prototypes in ARCHES is illustrated in Fig. 2. With Digital Twin Prototypes it was possible to develop and test scenarios before the mission took place. Automated testing was implemented through continuous integration / continuous delivery (CI/CD) in Gitlab. During the mission, all exchanged message on the physical twin and digital twin were recorded and can now be used to increase the quality of the CI/CD pipelines. {x o r} Digital Twin Physical Twin Digital Twin Prototype Fig. 2: Realization and evaluation in ARCHES [12] The framework that was developed during the project ARCHES, called ARCHES Digital Twin Framework, is published open-source [13]. As the hardware of ocean observation systems is quite specific and not suitable for independent replication, we developed a Digital Twin Prototype of a Pi Car-X by Sun Founder [14] and published this open-source [15], too. With the present paper, we extend this research by a case study in the smart farming domain. IV. SILAGECONTROL The smart farming project Silage Control with a consortium of the companies Silolytics Gmb H, Blunk Gmb H, and Kiel University aims to improve the process of silage making, i. e. the fermentation of grass or corn in silage heaps. To prevent the formation of mold, the harvested crop is compressed using heavyweight tractors. As shown in Fig. 3b, these tractors are equipped with a sensor bar (Fig. 3a) that includes GPS sensors, an inertial measurement unit (IMU), and a Li DAR. Together, these sensors provide continuous and accurate information about the tractor’s position/orientation, and the shape and volume of the silage heap. Moreover, sensor data from modern harvesting machines may be added through telemetry to provide information about nutrient levels and provenance of each layer within the silage heap. The aggregated sensor data, external service data, and physics simulations are planned to be combined to compute the state of the silo. The first experiments were conducted using a Jetson Nano single-board computer by NVIDIA. Later, it was replaced by a Raspberry Pi. The collected data provides near real-time insights into the volume of the silage heap, resulting in valuable feedback for the tractor driver to optimize the silo’s compaction. However, since silage making is seasonal, the development

(a) Sensor bar in lab environment (b) Sensor bar mounted on a tractor Fig. 3: Sensor bar which monitors the process of silage making. and maintenance of the platform poses a significant challenge for Silage Control due to limited hardware availability during that time. Thus, the Digital Twin Prototype approach presents the prospect of improving the software development in this context. V. RESEARCH DESIGN The software architecture of Silage Control is based on an event-driven microservice architecture with the Robot Operating System ROS [16], which enables us to conduct an exploratory case study that highlights the benefits of digital twins in a real-world context. The goal of this study is as follows: Goal: Identify challenges faced with Silage Control that can be solved by the Digital Twin Prototype approach. To identify the challenges faced by Silage Control, several meetings were held with Silolytics Gmb H over the course of three years. For our case study, we report on the four most relevant meetings: 1) The first meeting took place in the summer of 2020. As the team was planning to develop the sensor system using ROS and had started with the idea at Kiel University, we invited them to the GEOMAR site and presented our Digital Twin Prototype approach, showing a live demonstration of ocean observation systems developed by us. There was no specific research objective for this meeting, as we only got to know each other and discussed the different roles, skills, and ideas in the team. 2) The second meeting was at the end of 2021 when we interviewed the lead engineer for an interview study. As nearly one year has passed, we were interested in their actual development process since the first meeting. The questions we asked are presented in Table I. When we elaborated these questions, we followed the guide by Willing [17]. Note, that these questions are only the start questions. Since we conducted semi-structured interviews, they may vary from interview to interview depending on the conversation’s flow. For example, we asked “You mentioned you are developing XYZ, can you please describe how your development workflow looks like?” instead of “Please describe a typical workflow, when you develop/adjust a feature?”. Furthermore, depending the conversation’s flow, follow-up questions may arise that are not listed here, yet are relevant to get to know their development processes. 3) The third meeting took place in the spring of 2022, where we presented the ARCHES Digital Twin Framework and our Digital Twin Prototype using the Pi Car-X example. 4) During the fourth meeting in January 2023, Silolytics presented their early adoption of Digital Twin Prototype. VI. RESULTS AND DISCUSSION After the initial idea of Silage Control was formed, we invited the team to the GEOMAR Helmholtz Centre for Ocean Research in Kiel, where we demonstrated our research on ocean observation systems [12]. Since Silage Control is a modular sensor bar that is placed on top of a tractor and the team planned to utilize ROS for the software architecture, we expected to support the team by sharing our experience with embedded software development using ROS. During the meeting, we also invited a group of students whom we co-supervised in a master’s project to test and demonstrate a web application on real ocean observation systems. The setup was already quite similar to the idea of Silage Control, where sensory data is visualized in a web application. A. The Challenges in the Development Workflow At the second meeting, we conducted an interview with the lead engineer to gain insight into the development workflow for integrating sensors into the Silage Control system. The lead engineer described the process as follows: “When integrating a sensor, we always start by testing it on a PC. We identify which device drivers are required, install the drivers, and ensure they are compatible with the platform. We verify the sensor’s outputs on the PC to confirm that they meet the expected results. Some software packages require specific coordinate systems, and testing [in the office] on the PC is the easiest way to determine compatibility. The next step is to install the sensor on the platform, using the hardware manual to guide integration and seeking input from the sales team if needed. We check the device drivers in the pipeline, building them in Docker for later deployment to the mobile platform, where we also use Docker for building.” However, integrating sensors into the overall system can pose certain challenges. For example, integrating a GPS sensor into the office setting can be difficult due to:

Phase General Interview Questions Warm up What is your companies’ main product and which role do you have? Preferred strategies and observed obstacles Please describe a typical workflow, when you develop/adjust a feature? Do you remember a (complicated) problem you had to solve recently and how did you solve it? What do you like about your approach and what do you dislike? Quality assurance and product customization How do you ensure that new features or bug fixes do not compromise your product? How do you individualize the software of your product? TABLE I: The initial interview questions. “[...] One of our problems is that the GPS sensors need an unobstructed view of the sky, which complicates testing of the system. While indoor GPS systems are tested, we always face the challenge of setting up the sensors correctly when we have to take them outside, and it’s difficult to maintain the required power supply. This issue is a bit of a sticking point, and we have yet to find a solution.” As previously highlighted, embedded software development often faces the challenge of testing hardware in a suitable environment. Integrating a GPS sensor in an office setting is a typical example of this problem. The target system is too large for an office, and testing on a tractor in the field is expensive and time-consuming. To overcome this challenge, engineers often detach the hardware from the target system and place it in a laboratory environment. However, if a sensor only works as intended in the field, this problem becomes even more severe and can have a significant impact on the entire development process. Silage Control conducted their first experiments in 2020 after visiting GEOMAR, and we also asked them about the lessons they learned from those experiments: “We spent approximately 400 hours testing our system and collecting data from various use cases to cover as many scenarios as possible. Using this data, we developed our algorithms during the winter months, focusing primarily on perception, which involves recognizing the surrounding environment and identifying the building’s structural features automatically. We then integrated the entire workflow into the app and tested it offline, which was challenging due to the lack of available data for testing. However, we recorded various use cases, which we can now use to test the system’s functionality. We created launch files with [ROS] bag files to test our software and algorithms and evaluated them using different metrics. For instance, we assessed the importance of sensor alignment and the accuracy of Li DAR detection. We used this approach in our development workflow to ensure that our system meets the required standards.” Acquiring realistic and reusable data from sensors and actuators is a challenging task for the development and testing of embedded software systems. To address this challenge, the team used their first trial period to gather as much data as possible from the sensors and actuators. They stored all the ROS messages sent through the system in ROS bag files, which can be replayed later. We further asked for positive and negative experience with their workflow: “I really appreciate the automatic building of packages [with Docker]. It is quite straightforward to pull the packages onto the Jetson Nano later on. All you need to do is download the images. Additionally, Git Hub has Docker registries where you can easily deploy your packages. I find it helpful that pushing to the latest branch results in the package being built automatically. If we were to do this manually, it could lead to problems, but with the base image, all dependencies are included. By shifting the problems, we only need to do it once in Docker, which is much more convenient than using SSH or connecting a monitor to pull everything onto the Jetson Nano. This is actually the main advantage, as you only have to do it once and not repeatedly.” Regarding negative experiences, the engineer mentioned several challenges. First, some sensor drivers worked in older versions of ROS but not in the current LTS version. For instance, when the last LTS version (Noetic) for ROS, Version 1, was released in 2021, some of their drivers only supported the previous version (ROS Melodic). This required manual adjustment, which means that future updates might not be automatically loaded into the Docker container. Second, a Li DAR sensor malfunctioned after a few hours of use and costs several thousand Euros, which was significant in our context. Third, software documentation, especially for device drivers, is often unavailable or poorly maintained. The team faced the most difficulties with the Li DAR sensor, where they had to try several models before deciding on the right one. Since the engineer mentioned Docker several times, we asked whether they had started using it before or after the meeting at GEOMAR and whether they used it for deployment/testing only or also for development. He said that they began using Docker for deployment and automated testing after meeting with us but had not used it for development beforehand. “[...] When everything is in Docker containers, and you have to rebuild and change the images, you do not make as many changes anymore. It becomes more important that it works and is thoroughly tested. This also makes the entire deployment process more comprehensible.” This reveals a misconception about the potential use of Docker in development. Docker actually allows the mounting of folders into a container, which further allows for easy integration of the ROS development environment into the container. This means that the ROS development environment can easily be mounted to the container and started from there, without having to rebuild the image and create a new

container. We emphasized this point during the interview. B. The Challenges for Product Customization and Quality Assurance The third part of the interview was about the customization of Silage Control and the quality assurance workflow. As Silage Control is already built on a modular software architecture, changing sensors and their drivers is thought along the development of the system. Moreover, it is difficult to properly mount the sensor bar, since tractors and other argicultural machines are not standardized and different manufacturers exists. With regard to the customization of the sensor bar, Silage Control learned from their first experiments: “[During our first trials], we had to [manually] position the system [(the single sensors)] precisely to the tractor during installation, which made it peculiar and inconvenient. [Since then], we improved the installation and introduced a rail containing the sensors that can now be mounted on the tractor in various ways. Additionally, we have standardized the rail’s structure, which allows for calibration routines to run beforehand, and the sensors to calibrate themselves automatically. As a result, there is no need for pinpoint accuracy during installation. Before, it was nearly impossible to align everything perfectly. Now, our system is plug-andplay, making it easier to install. To ensure accuracy, we use CNC machines to manufacture the parts, including brackets and mounts. [...] Even a slight deviation of just one degree during installation can result in a significant error of 17 cm over a meter, which is far from ideal [...]. [Thus] we are constantly working to improve the installation process and reduce the margin of error to achieve the highest level of precision [and accuracy] possible.” Since the engineer already mentioned that the source code is managed on Git Hub and the build process and unit tests are also executed in Git Hub CI/CD pipelines, we did not ask whether there were automated unit tests, but rather whether there were automated integration tests that included the hardware in the CI/CD pipeline. This is particularly challenging for SMEs with limited funding for spare hardware. The engineers develop on the same hardware that is used in production, so it cannot be connected to CI/CD systems such as Git Hub. The engineer confirmed this limitation. “In my opinion, connecting all the sensors and having a setup to test all the basic functionalities using HIL with synthetic data would be beneficial. This would be relatively easy to implement, and for GPS, using synthetic data would be the simplest option. By doing so, we could test various forms of noise and other aspects. This approach has been wellresearched for the sensor type, and it may help us resolve our problem. Although we have considered it, we have not found a solution yet, and we also need to consider the effort.” During the silage season, the hardware is rarely available for the developers, which makes it difficult to connect the sensors to Git Hub or perform automated integration tests. Since these sensors can be quite expensive, the team does not have any spare sensors to use during this time. Therefore, the team has already considered using simulations to simulate the tractor and sensor bar, and to obtain a virtual context. This idea was further explained when the engineer was asked about the quality assurance workflow for Silage Control: “We intend to use simulations extensively in the future since we have other product development aspects that can only be developed in the simulation and would be too timeconsuming otherwise. This is especially true now that we are collaborating with a service provider, and we intend to incorporate the digital twin approach. This is also what we hope to accomplish here with Kiel University in the future. We have already devised a plan for what we intend to change in the future, but we have never had the necessary environment to implement it. Therefore, this will be the primary work package in the near future.” Thus, the Silolytics Gmb H already identified possible approaches to solve their problems with costly and often unavailable hardware components. C. A Digital Twin Prototype for Silage Control During our third meeting, we presented the Pi Car-X example and demonstrated how simulation can be used to provide virtual context to a Digital Twin Prototype. At the time of the meeting, the ARCHES Digital Twin Framework was not yet published and Silolytics already started developing a digital twin using a combination of C++ and Python components. However, Silage Control started following the Digital Twin Prototype approach, and during our fourth meeting, they presented their first results for their digital twin. The GAZEBO simulation [18] was used to model a simple tractor including the sensors, as shown in 4. This model already contains the IMU, GPS and Li DAR sensors and the business logic of Silage Control can be connected to the simulation. To replace the physical twin with a Digital Twin Prototype for development and testing, the next step is to connect the device drivers with the emulators connected to the simulation as shown in Fig. 5. The emulators receive commands from the drivers via different interfaces (Ethernet, RS 232, and USB) and send the commands to the GAZEBO simulation. The corresponding simulated sensors in GAZEBO react to the sent command and return the simulated data to the emulator. The emulator forwards the data again to the corresponding device driver. The traditional approach would be to add the emulator logic as module to the simulation. However, this has a Fig. 4: A simple digital model of a tractor mounted with the Silage Control sensor bar in a GAZEBO simulation.

Silage Control Tractor Model Imu Emulator GPS Emulator SIMULATED SENSORS/ACTUATORS Li DAR Emulator IMU Driver Li DAR Driver GPS Driver MQTT Bridge Legend (Hardware) Interface Publisher Subscriber CAN/RS 232 Silage Control ROS Master Gazebo ROS Master Publisher Subscriber Data/Status Commands Silage Control Business Logik Ethernet USB Fig. 5: Digital Twin Prototype of a tractor mounted with the Silage Control sensor bar in a GAZEBO simulation. few drawbacks. Ethernet interfaces are easy to emulate in simulation tools. Other interfaces such as RS 232 are not that easy to integrate to simulations and often need additional configuration. In addition, a tight coupling of an emulator to a specific simulation tool cannot be easily migrated to another simulation tool. Separating the emulator logic and only adding an interface to the simulation, allows an easier switch to other tools. Furthermore, Silage Control can decide to also use recorded data (e. g. from the ROS bag files) to replay the data to the emulator instead of using purely simulated data. D. Threads to Validity We identified two threads to the validity of our case study. Firstly, the case study was not initially conducted with a strict research plan and the idea developed over time. Secondly, we had prior knowledge of the Silolytics Gmb H and its team before conducting the interviews and already presented them our results from the ARCHES project. This might have influenced their development process and although the interviewed engineer did not know the questions beforehand, he may have guessed the intentions behind the different questions and answered them accordingly. VII. CONCLUSION AND FUTURE WORK In summary, the challenges for the Silage Control project can be summarized as follows: • The hardware has to be developed on a test bed, but tested on a real target; • The GPS sensors are difficult to test on the test bed; • Data acquisition is only possible seasonal; • Sensor prices are too high to buy spare hardware for development/testing; • Available software modules are sometimes not well maintained; As described in the introduction, these challenges are common and engineers face most of these challenges during the development of their systems. In the context of the project ARCHES, we described our Digital Twin Prototype approach that tackles these challenges [12]. For instance, virtualizing the hardware in the form of a Digital Twin Prototype and combining it with a simulation, as shown in our Pi Car-X example, enables the usage of virtual context for development and testing. From the Digital Twin Prototype, the team also gets a digital twin that can be utilized to monitor the physical twin during operation and collect data without the need to physically connect to the sensor bar mounted on a tractor. This enables the development of embedded software systems without the need to physically connect to the hardware and hence reduces costs that may be needed for spare hardware otherwise. Without the need for hardware in the development loop, the seasonal data gathering missions become less of a problem. Only the last point cannot be solved utilizing a digital twin, as the software modules are external features. The problem at that point is the embedded software community that develops device drivers with tight coupling to the overall system, e. g. a specific middleware. However, as already discussed by Kaupp, Brooks, Upcroft, et al. [19] and by Quigley, Conley, Gerkey, et al. [16], device drivers should be independent of the middleware used in the development of the embedded system. Otherwise, when switching to a different middleware, the driver must be redeveloped, even if the logic of the hardware remains unchanged. Due to the vast amount of programming languages and middlewares, manufacturers of sensors and actuators cannot develop and

maintain device drivers for all of them. Thus, it should be in the interest of manufacturers that their sensors are easy to access and independent of the middleware that is used. As the engineer explained, they tested several sensors, including the software, before deciding on one. ACKNOWLEDGMENT This research is funded by the Federal Ministry of Food and Agriculture (BMEL, Germany) via the Federal Office for Agriculture and Food (BLE, Germany) in the Silage Control project (contract no. 281 DT 02 B 21). REFERENCES [1] National Academy of Science and Engineering (acatech), Cyber-Physical Systems. Driving force for innovation in mobility, health, energy and production, https://en. acatech. de/publication/cyber- physicalsystems-driving-force-for-innovation-in-mobilityhealth-energy-and-production/ [Online; accessed 02 January-2023], 2011. [2] V. Jackson, A. van der Hoek, R. Prikladnicki, and C. Ebert, “Collaboration Tools for Developers,” IEEE Software, vol. 39, no. 2, pp. 7–15, Mar. 2022. DOI: 10.1109/ms.2021.3132137. [3] K. Hribernik, G. Cabri, F. Mandreoli, and G. Mentzas, “Autonomous, context-aware, adaptive digital twins—state of the art and roadmap,” Computers in Industry, vol. 133, p. 103508, Dec. 2021. DOI: 10.1016/j. compind.2021.103508. [4] S. Demers, P. Gopalakrishnan, and L. Kant, “A Generic Solution to Software-in-the-Loop,” in MILCOM 2007 - IEEE Military Communications Conference, IEEE, Oct. 2007. DOI: 10.1109/milcom.2007. 4455268. [5] A. Barbie, W. Hasselbring, N. Pech, S. Sommer, S. Fl¨ ogel, and F. Wenzh¨ ofer, “Prototyping Autonomous Robotic Networks on Different Layers of RAMI 4.0 with Digital Twins,” in 2020 IEEE International Conference on Multisensor Fusion and Integration for Intelligent Systems (MFI), IEEE, Sep. 2020. DOI: 10. 1109/mfi 49285.2020.9235210. [6] M. Grieves and J. Vickers, “Digital Twin: Mitigating Unpredictable, Undesirable Emergent Behavior in Complex Systems,” in Transdisciplinary Perspectives on Complex Systems, Springer, Aug. 2016, pp. 85– 113. DOI: 10.1007/978-3-319-38756-7 4. [7] E. Glaessgen and D. Stargel, “The digital twin paradigm for future NASA and U. S. Air Force vehicles,” in 53 rd AIAA/ASME/ASCE/AHS/ASC Structures, Structural Dynamics and Materials Conference, Apr. 2012. DOI: 10.2514/6.2012-1818. [8] W. Kritzinger, M. Karner, G. Traar, J. Henjes, and W. Sihn, “Digital Twin in manufacturing: A categorical literature review and classification,” IFACPapers On Line, vol. 51, no. 11, pp. 1016–1022, 2018. DOI: 10.1016/j. ifacol.2018.08.474. [9] R. R. Shamshiri, C. Weltzien, I. A. Hameed, et al., “Research and development in agricultural robotics: A perspective of digital farming,” International Journal of Agricultural and Biological Engineering, vol. 11, no. 4, pp. 1–11, 2018. DOI: 10 . 25165 / j . ijabe . 20181104.4278. [10] C. Pylianidis, S. Osinga, and I. N. Athanasiadis, “Introducing Digital Twins to Agriculture,” Computers and Electronics in Agriculture, vol. 184, p. 105942, May 2021. DOI: 10.1016/j. compag.2020.105942. [11] R. Saracco, “Digital Twins: Bridging Physical Space and Cyberspace,” Computer, vol. 52, no. 12, pp. 58– 64, Dec. 2019. DOI: 10.1109/mc.2019.2942803. [12] A. Barbie, N. Pech, W. Hasselbring, et al., “Developing an Underwater Network of Ocean Observation Systems with Digital Twin Prototypes - A Field Report from the Baltic Sea,” IEEE Internet Computing, 2021. DOI: 10.1109/mic.2021.3065245. [13] A. Barbie and N. Pech, “ARCHES Digital Twin Framework,” Tech. Rep., Dec. 2022. DOI: 10.3289/ sw arches core 1.0.0. [Online]. Available: https://git. geomar. de/open-source/arches. [14] Sun Founder, Smart Video Robot Car for Raspberry Pi. [Online]. Available: https://www. sunfounder. com/ products/picar-x. [15] A. Barbie, Digital Twin Prototypes - Git Hub Repository, https : / / github . com / cau - se / Digital Twin Prototypes. [16] M. Quigley, K. Conley, B. Gerkey, et al., “ROS: An open-source Robot Operating System,” in ICRA workshop on open source software, vol. 3, 2009, p. 5. [17] C. Willing, “Introducing Qualitative Research in Psychology,” Berkshire: Mc Graw–Hill Education, 2008. [18] N. Koenig and A. Howard, “Design and Use Paradigms for Gazebo, an Open-Source Multi-Robot Simulator,” in 2004 IEEE/RSJ International Conference on Intelligent Robots and Systems (IROS), IEEE. DOI: 10.1109/iros.2004.1389727. [19] T. Kaupp, A. Brooks, B. Upcroft, and A. Makarenko, “Building a Software Architecture for a Human-Robot Team Using the Orca Framework,” in Proceedings 2007 IEEE International Conference on Robotics and Automation, IEEE, Apr. 2007. DOI: 10.1109/robot. 2007.364051.